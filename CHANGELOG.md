# 更新日志

本文档记录了本项目的所有重要变更。

## v1.1.0 - 2026-01-25

增强桌面客户端体验，提供完整的图形界面应用和可执行文件打包支持。

### 新增功能

- **PyQt6 桌面客户端**（`app.py` 和 `gui/` 模块）
  - 主窗口界面（MainWindow）：整合配置、进度、日志三大面板
  - 配置面板（ConfigPanel）：
    - 日期选择器（今天/昨天/自定义日期）
    - 文章链接管理（添加/删除/从配置文件加载）
    - API Key 设置（支持保存到配置文件）
  - 进度面板（ProgressPanel）：
    - 实时状态显示（就绪/运行中/已完成/失败）
    - 进度条反馈
  - 日志面板（LogPanel）：
    - 实时日志输出（自动滚动）
    - 日志级别过滤
  - 后台工作线程（WorkflowWorker）：避免 UI 阻塞

- **可执行文件打包支持**
  - Windows 打包脚本（`scripts/build_windows.bat`）
    - 自动检测并安装 pyinstaller
    - 一键生成 `dist/微信AI日报助手.exe`
  - macOS 打包脚本（`scripts/build_macos.sh`）
    - 自动检测并安装 pyinstaller
    - 一键生成 `dist/微信AI日报助手.app`
  - 打包后无需 Python 环境即可运行

- **配置管理优化**
  - ConfigManager 类：统一管理配置文件读写
  - 自动根据操作系统选择 GUI 模板路径（Windows/macOS）
  - 支持从 GUI 界面保存配置到 `configs/config.yaml`

- **日志处理增强**
  - QTextEditLogHandler：将 logging 日志重定向到 Qt 信号
  - 支持实时日志显示和自动滚动

### 改进优化

- 优化工作流执行逻辑，支持在后台线程中运行
- 改进错误处理和用户提示
- 增强跨平台兼容性

### 文档更新

- 更新 README.md 和 docs/README_en.md，添加桌面客户端使用说明
- 更新 CLAUDE.md，添加 GUI 模块架构说明
- 添加打包脚本使用文档

## v1.0.0 - 2026-01-25

正式开源发布，实现了微信公众号文章自动化收集和每日 AI 内容日报生成的完整工作流。

### 新增功能

- **GUI 自动化采集**：支持自动打开微信、搜索公众号、采集文章链接
  - 基于模板图片匹配实现精准点击操作
  - 支持页面滚动和截图功能
  - 自动检测并激活微信窗口

- **VLM 智能识别**：集成阿里云 DashScope 视觉语言模型
  - 自动识别公众号页面中的日期位置，精准定位当日文章
  - 自动处理高分辨率显示屏缩放（Retina 等）

- **LLM 内容分析**：集成阿里云 DashScope 大语言模型
  - 自动提取文章元数据（标题、作者、发布时间、正文、图片等）
  - 生成 100-200 字的内容速览
  - 评估文章推荐度（0-100 分）
  - 生成不超过 100 字的精选理由

- **每日日报生成**：自动生成富文本格式的 HTML 日报
  - 自动采集指定公众号当日发布的所有文章
  - 按评分筛选优质文章（90 分以上或前 3 篇）
  - 支持一键复制粘贴到公众号编辑器
  - 支持自定义 HTML 模板

- **跨平台支持**：同时支持 Windows 和 macOS 系统
  - 自动检测操作系统类型
  - 支持平台特定的模板图片配置

### 配置功能

- 支持 YAML 配置文件（`configs/config.yaml`）
- 支持环境变量配置（DASHSCOPE_API_KEY）
- 支持自定义模板图片路径
- 支持模型参数配置（model、thinking_budget、enable_thinking 等）

### 文档更新

- 中英文双语 README（`README.md` 和 `docs/README_en.md`）
- 开发者指南（`CLAUDE.md`）
